<!DOCTYPE HTML>
<html>
	<head>

		<title>Membership signup</title>

		<!-- FOR JQUERY-->
		<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.min.js"></script>

		<!-- FOR BOOTSTRAP -->
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
		<link rel="stylesheet" href="css/site.css">

		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.js"></script>		<!-- FOR BOOTSTRAP -->
    <script src="js/product.js" charset="utf-8"></script>
<!-- FOR CHECK FORM-->
		<script>
			function checkUserName()
			{
				var userNameObj = document.getElementById("membership_form_inputName");
				var regularExpression = /^[a-zA-Z]{5,}/;
				var divObj = document.getElementById("membership_form_div_inputName");
				var promptObj = document.getElementById("membership_form_help-block_name");
				var result = false;
				if (true == regularExpression.test(userNameObj.value))
				{
					divObj.className = "form-group has-success";
					promptObj.innerHTML = "valid name";
					result = true;
				}
				else
				{
					divObj.className = "form-group has-error";
					promptObj.innerHTML = "Name must be at least 5 letters";
				}
				return result;
			}

			function resetUserName()
			{
				var divObj = document.getElementById("membership_form_div_inputName");
				var promptObj = document.getElementById("membership_form_help-block_name");
				divObj.className = "form-group";
				promptObj.innerHTML = "";
			}

			function checkUserSurname()
			{
				var userSurnameObj = document.getElementById("membership_form_inputSurname");
				var regularExpression = /^[a-zA-Z]{8,}/;
				var divObj = document.getElementById("membership_form_div_inputSurname");
				var promptObj = document.getElementById("membership_form_help-block_surname");
				var result = false;
				if (true == regularExpression.test(userSurnameObj.value))
				{
					divObj.className = "form-group has-success";
					promptObj.innerHTML = "valid surname";
					result = true;
				}
				else
				{
					divObj.className = "form-group has-error";
					promptObj.innerHTML = "Surname must be at least 8 letters";
				}
				return result;
			}

			function resetUserSurname()
			{
				var divObj = document.getElementById("membership_form_div_inputSurname");
				var promptObj = document.getElementById("membership_form_help-block_surname");
				divObj.className = "form-group";
				promptObj.innerHTML = "";
			}

			function checkUserEmail()
			{
				var userEmailObj = document.getElementById("membership_form_inputEmailAddress");
				var regularExpression = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;
				var divObj = document.getElementById("membership_form_div_inputEmailAddress");
				var promptObj = document.getElementById("membership_form_help-block_emailAddress");
				var result = false;
				if (true == regularExpression.test(userEmailObj.value))
				{
					result = true;
					divObj.className = "form-group has-success";
					promptObj.innerHTML = "valid email address";
				}
				else
				{
					divObj.className = "form-group has-error";
					promptObj.innerHTML = "invalid email address. correct pattern example: abc@123.com";
				}
				return result;
			}

			function resetUserEmail()
			{
				var divObj = document.getElementById("membership_form_div_inputEmailAddress");
				var promptObj = document.getElementById("membership_form_help-block_emailAddress");
				divObj.className = "form-group";
				promptObj.innerHTML = "";
			}

			function checkUserAgreement()
			{
				var userAgreement = document.getElementById("membership_form_userAgreement");
				var divObj = document.getElementById("membership_form_div_userAgreement");
				var promptObj = document.getElementById("membership_form_help-block_userAgreement");
				var result = false;
				if(true == userAgreement.checked)
				{
					divObj.className = "form-group";
					promptObj.innerHTML="";
					result = true;
				}
				else
				{
					divObj.className = "form-group has-error";
					promptObj.innerHTML = "In order to signup, the user agreement must be accepted.";
				}
				return result;
			}

			function resetUserAgreement()
			{
				var divObj = document.getElementById("membership_form_div_userAgreement");
				var promptObj = document.getElementById("membership_form_help-block_userAgreement");
				divObj.className = "form-group";
				promptObj.innerHTML = "";
			}

			function checkForm()
			{
				if(checkUserName() == true & checkUserSurname() == true & checkUserEmail() == true & checkUserAgreement() == true)
				{
					var formObj = document.getElementById("membership_form");
					formObj.submit();

					alert("signup successfully");

					formObj.reset();
					resetUserName();
					resetUserSurname();
					resetUserEmail();
					resetUserAgreement();
				}
			}
			function doAddToCart(){
					addToCart(pObject);
			}
		</script>

	</head>

	<body  class="" onload="setCartData()">
		<!-- BOOTSTRAP NAV>-->

				<div class="heading text-center">
					<q class="quote ">A book is a dream that you hold in your hand</q>
					<cite>Neil Gaiman</cite>
				</div>
			  <nav class="navbar navbar-default">
			    <div class="container-fluid">
			      <!-- Brand and toggle get grouped for better mobile display -->
			      <div class="navbar-header">
			        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#myNavbar" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
			        <a class="navbar-brand" href="index.html">Auckland City Books</a> </div>
			      <!-- Collect the nav links, forms, and other content for toggling -->
			      <div class="collapse navbar-collapse" id="myNavbar">
			        <ul class="nav navbar-nav navbar-right">
			          <li><a href="index.html">Home</a></li>
			          <li><a href="product.html">Books</a></li>
			          <li><a href="membership.html">Signup</a></li>
			          <li><a href="about.html">About</a></li>
								<li onload="showCartNum()">
										<a href="shoppingCart.html">
											<span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span>
											<span id="cartNum">(0)</span>
										</a>
								</li>
			        </ul>
			      </div>
			      <!-- /.navbar-collapse -->
			    </div>
			    <!-- /.container-fluid -->
			  </nav>
		<form id="membership_form" style="margin: 0 auto; margin-top:10vh; width:40vw; min-width: 450px; border:1px solid #CCCCCC; border-radius:1vw; padding:30px; text-align: left; background-color:#F5F5F5">
			<h1>Membership Signup</h1>
			<br>
			<!--has-error has-success-->
			<div class="form-group" id="membership_form_div_inputName">
				<label class="control-label" for="membership_form_inputName">Name:</label>
				<input type="text" class="form-control" id="membership_form_inputName" placeholder="please input your name" onblur="checkUserName()">
				<span id="membership_form_help-block_name" class="help-block"></span>
			</div>

			<div class="form-group" id="membership_form_div_inputSurname">
				<label class="control-label" for="membership_form_inputSurname">Surname:</label>
				<input type="text" class="form-control" id="membership_form_inputSurname" placeholder="please input your surname" onblur="checkUserSurname()">
				<span id="membership_form_help-block_surname" class="help-block"></span>
			</div>

			<div class="form-group" id="membership_form_div_inputEmailAddress">
				<label class="control-label" for="membership_form_inputEmailAddress">Email Address:</label>
				<input type="email" class="form-control" id="membership_form_inputEmailAddress" placeholder="please input your email address" onblur="checkUserEmail()">
				<span id="membership_form_help-block_emailAddress" class="help-block"></span>
			</div>

			<div class="form-group">
				<label class="control-label">Date of birth:</label>
				<!--<input type="text" class="form-control" id="membership_form_inputBirthday" placeholder="yyyy/mm/dd">-->
				<br>
				<select class="form-control" style="display: inline-block; width: 33%;" id="membership_form_inputBirthday_year" onchange="updateMonths()">
				</select>
				<select class="form-control" style="display: inline-block; width: 32%;" id="membership_form_inputBirthday_month" onchange="updateDays()">
				</select>
				<select class="form-control" style="display: inline-block; width: 32%;" id="membership_form_inputBirthday_day">
				</select>
				<span id="membership_form_help-block_birthday" class="help-block"></span>

				<script>
					var yearsObj = document.getElementById("membership_form_inputBirthday_year");
					var monthsObj = document.getElementById("membership_form_inputBirthday_month");
					var daysObj = document.getElementById("membership_form_inputBirthday_day");
					var monthsArray = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

					function createYears()
					{
						var myDate = new Date();
						var maxYear = myDate.getFullYear();

						for(var i = 1900; i <= maxYear; i++)
						{
							yearsObj.options.add(new Option(i, i));
						}

						yearsObj.selectedIndex = 1990 - 1900;
					}

					function updateMonths()
					{
						monthsObj.options.length = 0;
						var myDate = new Date();
						var maxYear = myDate.getFullYear();
						var maxMonth = myDate.getMonth() + 1;

						var maxMonthForCreating = 12;
						var currentYearObj = yearsObj.options[yearsObj.selectedIndex];
						if(currentYearObj.value >= maxYear)
						{
							maxMonthForCreating = maxMonth;
						}

						for(var i = 0; i < maxMonthForCreating; i++)
						{
							monthsObj.options.add(new Option(monthsArray[i], i+1));
						}

						monthsObj.selectedIndex = 0;

						updateDays();
					}


					function updateDays()
					{
						daysObj.options.length = 0;
						var currentYearObj = yearsObj.options[yearsObj.selectedIndex];
						var currentMonthObj = monthsObj.options[monthsObj.selectedIndex];
						var countOfDays = 0;

						var myDate = new Date();
						var maxYear = myDate.getFullYear();
						var maxMonth = myDate.getMonth() + 1;
						var maxDay = myDate.getDate();

						if(currentYearObj.value >= maxYear && currentMonthObj.value >= maxMonth)
						{
							countOfDays = myDate.getDate();
						}
						else if(currentMonthObj.value == 1 || currentMonthObj.value == 3 || currentMonthObj.value == 5 || currentMonthObj.value == 7 || currentMonthObj.value == 8 || currentMonthObj.value == 10 || currentMonthObj.value == 12)
						{
							countOfDays = 31;
						}
						else
						{
							if(currentMonthObj.value == 2)
							{
								if(currentYearObj.value % 400 == 0 || ((currentYearObj.value % 4 == 0) && (currentYearObj.value % 100 != 0)))
								{
									countOfDays = 29;
								}
								else
								{
									countOfDays = 28;
								}
							}
							else
							{
								countOfDays = 30;
							}
						}

						for(var i = 1; i <= countOfDays; i++)
						{
							daysObj.options.add(new Option(i, i));
						}
						daysObj.selectedIndex = 0;
					}

					createYears();
					updateMonths();

				</script>
			</div>

			<div  class="form-group">
				<label class="control-label">Gender:</label>
				<br>
				<label class="radio-inline"><input type="radio" name="membership_form_gender" id="membership_form_gender_male" checked value="male">male</label>
				<label class="radio-inline"><input type="radio" name="membership_form_gender" id="membership_form_gender_female" value="female">female</label>
				<span id="membership_form_help-block_gender" class="help-block"></span>
			</div>
			<div  id="membership_form_div_userAgreement" class="form-group" style="margin-top: 20px;">
				<!--<label class="control-label" for="membership_form_gender_male membership_form_gender_female">user agreement:</label>
				<br>-->
				<label class="checkbox-inline"><input type="checkbox" id="membership_form_userAgreement" onchange="checkUserAgreement()">user agreement</label>
				<span id="membership_form_help-block_userAgreement" class="help-block"></span>
			</div>

			<button type="button" class="btn btn-default" onclick="checkForm()">Submit</button>
		</form>
<br><br><br>
	  <footer class="footer">
	      <div class="row">
	        <div class="well col-xs-12">
	          <p class="text-center">Copyright © Auckland City Books</p>
	        </div>
	    </div>
	  </footer>


	</body>
</html>
